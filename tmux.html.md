# tmux


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Overview

The tmux tools module provides functions to capture and inspect content
from tmux sessions, windows, and panes. These are particularly useful
when working with Solveit’s AI assistant to debug terminal sessions,
share command output, or monitor multiple processes.

### Using as Solveit Tools

To give the AI assistant access to your tmux sessions, simply reference
the tools using the usual ampersand notation – `tmux_tool_info()` will
add a note with the full list for you:

``` markdown
dialoghelper.tmux tools: &`[pane, list_panes, panes, list_windows, windows, list_sessions, sessions]`
```

This allows the assistant to inspect your terminal state and help with
debugging, process monitoring, or understanding command outputs across
multiple panes.

### Function Hierarchy

The module is organized from specific to broad:

- **Capture functions**: Get content from tmux
  - [`pane()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#pane) -
    Single pane content
  - [`panes()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#panes) -
    All panes in a window
  - [`windows()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#windows) -
    All windows in a session  
  - [`sessions()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#sessions) -
    Everything in tmux
- **List functions**: Enumerate tmux objects
  - [`list_panes()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#list_panes) -
    Show pane info
  - [`list_windows()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#list_windows) -
    Show window info
  - [`list_sessions()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#list_sessions) -
    Show session info

Each capture function returns the visible terminal content plus
additional scrollback history (default 500 lines, which can be modified
by calling `set_default_history(n)`).

### Common Use Cases with Solveit’s AI

**Debug errors across terminals**: When something breaks in one pane,
the AI can see all your terminals at once to understand context:

> My script is failing in pane 1, can you help?

The AI sees your error messages, the commands you ran, and even what’s
happening in other panes (like log files you might be tailing).

**Monitor long-running processes**: Check on multiple jobs without
switching windows:

> How are my training runs doing?

The AI can inspect all your windows - seeing if processes completed,
checking for errors, or summarizing outputs from different experiments
running in parallel.

**Reconstruct lost commands**: When you can’t remember what you typed
earlier:

> What was that curl command I used in the other window?

The AI can search through all your session history to find specific
commands, even if they’ve scrolled off screen or are in a different
window.

### Using as Python Functions

You can also use these functions directly in code to search and analyze
terminal content. Here are some examples:

Find all lines containing “error” across all sessions:

``` python
all_content = sessions(n=2000)
errors = [(path, line)
          for path, content in flatten_dict(all_content)
          for line in content.splitlines()
          if 'error' in line.lower()]
```

Find which pane contains a specific command:

``` python
found = {path: content for path, content in flatten_dict(windows(n=1000))
    if 'docker run' in content}
```

## Details

``` python
def shell_ret(*args, capture_output=True, text=True, shell=True, ret=True, **kwargs):
    "Shortcut for `subprocess.run(shell=True)`"
    o = subprocess.run(*args, shell=shell, text=text, capture_output=capture_output, **kwargs)
    return (o.stdout or o.stderr) if ret else o
```

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L25"
target="_blank" style="float:right; font-size:smaller">source</a>

### shell_ret

``` python

def shell_ret(
    cmd:str, capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*Run shell command locally or over ssh (use host for alias, or
ip/user/keyfile)*

``` python
print(shell_ret('du -sh'))
```

    316K    .

``` python
print(shell_ret('du -sh', host='hack'))
```

    14G .

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L36"
target="_blank" style="float:right; font-size:smaller">source</a>

### set_default_history

``` python

def set_default_history(
    n:int
):

```

*Set the default number of lines to capture from tmux history*

The
[`set_default_history`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#set_default_history)
function sets a global default for how many lines of scrollback history
to capture when using tmux tools. This avoids having to specify the line
count every time you call a tmux function.

The default is initially 500 lines, which includes the visible terminal
plus scrollback.

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L44"
target="_blank" style="float:right; font-size:smaller">source</a>

### pane

``` python

def pane(
    n:int=None, # Number of scrollback lines to capture, in addition to visible area (None uses default_tmux_lines, which is 500 if not otherwise set)
    pane:int=None, # Pane number to capture from
    session:str=None, # Session name to target
    window:int=None, # Window number to target
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*Grab the tmux history in plain text*

``` python
# print(pane(1))
```

``` python
# print(pane(1, host='hack'))
```

[`pane()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#pane)
captures the scrollback history from a specific tmux pane. You can
specify which pane to capture using any combination of session, window,
and pane numbers. If you don’t specify anything, it captures from the
current pane.

`n` controls how many lines of scrollback to include beyond the visible
area. If not specified, it uses the global `default_tmux_lines` value.

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L63"
target="_blank" style="float:right; font-size:smaller">source</a>

### list_panes

``` python

def list_panes(
    session:str=None, # Session name to list panes from
    window:int=None, # Window number to list panes from
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*List panes for a session/window (or current if none specified)*

[`list_panes()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#list_panes)
returns information about panes in current or specified window. Output
includes pane numbers, dimensions, and active status.

``` python
print(list_panes(window=0))
```

    0: [79x25] [history 1098/2000, 376079 bytes] %0
    1: [79x25] [history 1805/2000, 710873 bytes] %4
    2: [87x25] [history 1537/2000, 1377615 bytes] %2
    3: [167x51] [history 473/2000, 300939 bytes] %3 (active)

``` python
print(list_panes(window=0, host='hack'))
```

    0: [80x26] [history 455/2000, 776759 bytes] %26
    1: [177x52] [history 75/2000, 223754 bytes] %27 (active)
    2: [96x26] [history 1897/2000, 8656798 bytes] %5
    3: [96x25] [history 369/2000, 1834352 bytes] %25

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L82"
target="_blank" style="float:right; font-size:smaller">source</a>

### panes

``` python

def panes(
    session:str=None, # Session name to target
    window:int=None, # Window number to target
    n:int=None, # Number of scrollback lines to capture
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*Grab history from all panes in a session/window*

[`panes()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#panes)
returns a dictionary with pane numbers as keys and their captured
content as values. Useful for getting a snapshot of all panes in a
window at once.

``` python
from pprint import pprint
```

``` python
# pprint(panes(window=0, n=10))
```

``` python
# pprint(panes(n=10, host='hack'))
```

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L96"
target="_blank" style="float:right; font-size:smaller">source</a>

### list_windows

``` python

def list_windows(
    session:str=None, # Session name to list windows from
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*List all windows in a session*

[`list_windows()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#list_windows)
shows all windows in current or specified session. Output includes
window numbers, names, pane counts, and markers for active (\*) and
previous (-) windows.

``` python
print(list_windows())
```

    0: bash*Z (4 panes) [167x51] [layout e60c,167x51,0,0{79x51,0,0[79x25,0,0,0,79x25,0,26,4],87x51,80,0[87x25,80,0,2,87x25,80,26,3]}] @0 (active)

``` python
print(list_windows(host='hack'))
```

    0: sudo*Z (4 panes) [177x52] [layout 1b9f,177x52,0,0{80x52,0,0[80x26,0,0,26,80x25,0,27,27],96x52,81,0[96x26,81,0,5,96x25,81,27,25]}] @0 (active)

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L114"
target="_blank" style="float:right; font-size:smaller">source</a>

### windows

``` python

def windows(
    session:str=None, # Session name to target
    n:int=None, # Number of scrollback lines to capture
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*Grab history from all panes in all windows of a session*

[`windows()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#windows)
returns a nested dictionary: window names/numbers as keys, each
containing a dictionary of panes and their content. Captures entire
session structure in one call.

``` python
# pprint(windows())
```

``` python
# pprint(windows(host='hack'))
```

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L126"
target="_blank" style="float:right; font-size:smaller">source</a>

### list_sessions

``` python

def list_sessions(
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*List all tmux sessions*

[`list_sessions()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#list_sessions)
shows all tmux sessions. Output includes session names, window counts,
creation time, and attachment status.

``` python
print(list_sessions())
```

    0: 1 windows (created Fri Jan 16 13:25:06 2026) (attached)

``` python
print(list_sessions(host='hack'))
```

    0: 1 windows (created Wed Oct  1 22:53:16 2025)

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L138"
target="_blank" style="float:right; font-size:smaller">source</a>

### sessions

``` python

def sessions(
    n:int=None, # Number of scrollback lines to capture
    capture_output:bool=True, text:bool=True, ret:bool=True, host:str=None, # Optional SSH Host
    ip:str=None, # Optional SSH IP
    user:str=None, # Optional SSH user
    keyfile:str=None, # Optional SSH keyfile
):

```

*Grab history from all panes in all windows of all sessions*

[`sessions()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#sessions)
returns complete tmux state: all sessions, windows, and panes with their
content. Useful for capturing everything at once or debugging complex
tmux setups.

``` python
# pprint(sessions())
```

``` python
# pprint(sessions(host='hack'))
```

------------------------------------------------------------------------

<a
href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/tmux.py#L147"
target="_blank" style="float:right; font-size:smaller">source</a>

### flatten_dict

``` python

def flatten_dict(
    d, parent_key:str='', sep:str='//'
):

```

*Flatten nested dict into list of (key_path, value) tuples*

[`flatten_dict`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#flatten_dict)
converts nested dictionaries into a flat list of (key_path, value)
tuples. This is particularly useful with tmux tools since
[`windows()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#windows)
and
[`sessions()`](https://AnswerDotAI.github.io/dialoghelper/tmux.html#sessions)
return deeply nested structures. By flattening them, you can easily
search all content without writing nested loops.

The key paths show exactly where content was found (e.g.,
`"session1//0:bash//1"` tells you it’s from session1, window 0 named
bash, pane 1), making it simple to trace back to the source location.

``` python
nested = {
    'session1': {
        '0:bash': {0: 'some content', 1: 'more content'},
        '1:vim': {0: 'editing file'}
    }
}
for path, content in flatten_dict(nested): print(f"{path}: {content}")
```

    session1//0:bash//0: some content
    session1//0:bash//1: more content
    session1//1:vim//0: editing file
