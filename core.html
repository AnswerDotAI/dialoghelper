<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>dialoghelper</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-baedc78cbf92349237790bf011c153e8.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js" integrity="sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="dialoghelper">
<meta property="og:description" content="Helper functions for solveit dialogs">
<meta property="og:site_name" content="dialoghelper">
<meta name="twitter:title" content="dialoghelper">
<meta name="twitter:description" content="Helper functions for solveit dialogs">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">dialoghelper</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./core.html">dialoghelper</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">dialoghelper</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./core.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">dialoghelper</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./capture.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">capture</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tracetools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tracetools</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tmux.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">tmux</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_exhash.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ðŸ¤–ReplyðŸ¤–<!-- SOLVEIT_SEPARATOR_7f3a9b2c --></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#helpers" id="toc-helpers" class="nav-link active" data-scroll-target="#helpers">Helpers</a>
  <ul class="collapse">
  <li><a href="#add_styles" id="toc-add_styles" class="nav-link" data-scroll-target="#add_styles">add_styles</a></li>
  </ul></li>
  <li><a href="#basics" id="toc-basics" class="nav-link" data-scroll-target="#basics">Basics</a>
  <ul class="collapse">
  <li><a href="#find_dname" id="toc-find_dname" class="nav-link" data-scroll-target="#find_dname">find_dname</a></li>
  <li><a href="#xgeta" id="toc-xgeta" class="nav-link" data-scroll-target="#xgeta">xgeta</a></li>
  <li><a href="#xposta" id="toc-xposta" class="nav-link" data-scroll-target="#xposta">xposta</a></li>
  <li><a href="#call_endpa" id="toc-call_endpa" class="nav-link" data-scroll-target="#call_endpa">call_endpa</a></li>
  <li><a href="#call_endp" id="toc-call_endp" class="nav-link" data-scroll-target="#call_endp">call_endp</a></li>
  <li><a href="#curr_dialog" id="toc-curr_dialog" class="nav-link" data-scroll-target="#curr_dialog">curr_dialog</a></li>
  <li><a href="#msg_idx" id="toc-msg_idx" class="nav-link" data-scroll-target="#msg_idx">msg_idx</a></li>
  <li><a href="#add_html" id="toc-add_html" class="nav-link" data-scroll-target="#add_html">add_html</a></li>
  <li><a href="#add_html_a" id="toc-add_html_a" class="nav-link" data-scroll-target="#add_html_a">add_html_a</a></li>
  <li><a href="#add_scr" id="toc-add_scr" class="nav-link" data-scroll-target="#add_scr">add_scr</a></li>
  <li><a href="#add_scr_a" id="toc-add_scr_a" class="nav-link" data-scroll-target="#add_scr_a">add_scr_a</a></li>
  <li><a href="#iife" id="toc-iife" class="nav-link" data-scroll-target="#iife">iife</a></li>
  <li><a href="#iife_a" id="toc-iife_a" class="nav-link" data-scroll-target="#iife_a">iife_a</a></li>
  <li><a href="#pop_data" id="toc-pop_data" class="nav-link" data-scroll-target="#pop_data">pop_data</a></li>
  <li><a href="#pop_data_a" id="toc-pop_data_a" class="nav-link" data-scroll-target="#pop_data_a">pop_data_a</a></li>
  <li><a href="#fire_event" id="toc-fire_event" class="nav-link" data-scroll-target="#fire_event">fire_event</a></li>
  <li><a href="#fire_event_a" id="toc-fire_event_a" class="nav-link" data-scroll-target="#fire_event_a">fire_event_a</a></li>
  <li><a href="#event_get" id="toc-event_get" class="nav-link" data-scroll-target="#event_get">event_get</a></li>
  <li><a href="#event_get_a" id="toc-event_get_a" class="nav-link" data-scroll-target="#event_get_a">event_get_a</a></li>
  <li><a href="#trigger_now" id="toc-trigger_now" class="nav-link" data-scroll-target="#trigger_now">trigger_now</a></li>
  <li><a href="#display_response" id="toc-display_response" class="nav-link" data-scroll-target="#display_response">display_response</a></li>
  </ul></li>
  <li><a href="#run-python" id="toc-run-python" class="nav-link" data-scroll-target="#run-python">Run python</a>
  <ul class="collapse">
  <li><a href="#set_pyrun" id="toc-set_pyrun" class="nav-link" data-scroll-target="#set_pyrun">set_pyrun</a></li>
  <li><a href="#doc" id="toc-doc" class="nav-link" data-scroll-target="#doc">doc</a></li>
  </ul></li>
  <li><a href="#viewedit-dialog" id="toc-viewedit-dialog" class="nav-link" data-scroll-target="#viewedit-dialog">View/edit dialog</a>
  <ul class="collapse">
  <li><a href="#read_msg" id="toc-read_msg" class="nav-link" data-scroll-target="#read_msg">read_msg</a></li>
  <li><a href="#find_msgs" id="toc-find_msgs" class="nav-link" data-scroll-target="#find_msgs">find_msgs</a></li>
  <li><a href="#view_dlg" id="toc-view_dlg" class="nav-link" data-scroll-target="#view_dlg">view_dlg</a></li>
  <li><a href="#add_msg" id="toc-add_msg" class="nav-link" data-scroll-target="#add_msg">add_msg</a></li>
  <li><a href="#add_prompt" id="toc-add_prompt" class="nav-link" data-scroll-target="#add_prompt">add_prompt</a></li>
  <li><a href="#read_msgid" id="toc-read_msgid" class="nav-link" data-scroll-target="#read_msgid">read_msgid</a></li>
  <li><a href="#view_msg" id="toc-view_msg" class="nav-link" data-scroll-target="#view_msg">view_msg</a></li>
  <li><a href="#del_msg" id="toc-del_msg" class="nav-link" data-scroll-target="#del_msg">del_msg</a></li>
  <li><a href="#update_msg" id="toc-update_msg" class="nav-link" data-scroll-target="#update_msg">update_msg</a></li>
  <li><a href="#run_msg" id="toc-run_msg" class="nav-link" data-scroll-target="#run_msg">run_msg</a></li>
  <li><a href="#copy_msg" id="toc-copy_msg" class="nav-link" data-scroll-target="#copy_msg">copy_msg</a></li>
  <li><a href="#paste_msg" id="toc-paste_msg" class="nav-link" data-scroll-target="#paste_msg">paste_msg</a></li>
  <li><a href="#enable_mermaid" id="toc-enable_mermaid" class="nav-link" data-scroll-target="#enable_mermaid">enable_mermaid</a></li>
  <li><a href="#mermaid" id="toc-mermaid" class="nav-link" data-scroll-target="#mermaid">mermaid</a></li>
  <li><a href="#toggle_header" id="toc-toggle_header" class="nav-link" data-scroll-target="#toggle_header">toggle_header</a></li>
  <li><a href="#toggle_bookmark" id="toc-toggle_bookmark" class="nav-link" data-scroll-target="#toggle_bookmark">toggle_bookmark</a></li>
  <li><a href="#toggle_comment" id="toc-toggle_comment" class="nav-link" data-scroll-target="#toggle_comment">toggle_comment</a></li>
  <li><a href="#dlg-conveniences" id="toc-dlg-conveniences" class="nav-link" data-scroll-target="#dlg-conveniences">Dlg conveniences</a></li>
  <li><a href="#url2note" id="toc-url2note" class="nav-link" data-scroll-target="#url2note">url2note</a></li>
  <li><a href="#create_or_run_dialog" id="toc-create_or_run_dialog" class="nav-link" data-scroll-target="#create_or_run_dialog">create_or_run_dialog</a></li>
  <li><a href="#stop_dialog" id="toc-stop_dialog" class="nav-link" data-scroll-target="#stop_dialog">stop_dialog</a></li>
  <li><a href="#rm_dialog" id="toc-rm_dialog" class="nav-link" data-scroll-target="#rm_dialog">rm_dialog</a></li>
  <li><a href="#run_code_interactive" id="toc-run_code_interactive" class="nav-link" data-scroll-target="#run_code_interactive">run_code_interactive</a></li>
  </ul></li>
  <li><a href="#text-edit" id="toc-text-edit" class="nav-link" data-scroll-target="#text-edit">Text Edit</a></li>
  <li><a href="#ast-grep" id="toc-ast-grep" class="nav-link" data-scroll-target="#ast-grep">ast-grep</a>
  <ul class="collapse">
  <li><a href="#ast_py" id="toc-ast_py" class="nav-link" data-scroll-target="#ast_py">ast_py</a></li>
  <li><a href="#ast_grep" id="toc-ast_grep" class="nav-link" data-scroll-target="#ast_grep">ast_grep</a></li>
  </ul></li>
  <li><a href="#context" id="toc-context" class="nav-link" data-scroll-target="#context">Context</a>
  <ul class="collapse">
  <li><a href="#ctx_folder" id="toc-ctx_folder" class="nav-link" data-scroll-target="#ctx_folder">ctx_folder</a></li>
  <li><a href="#ctx_repo" id="toc-ctx_repo" class="nav-link" data-scroll-target="#ctx_repo">ctx_repo</a></li>
  <li><a href="#ctx_symfile" id="toc-ctx_symfile" class="nav-link" data-scroll-target="#ctx_symfile">ctx_symfile</a></li>
  <li><a href="#ctx_symfolder" id="toc-ctx_symfolder" class="nav-link" data-scroll-target="#ctx_symfolder">ctx_symfolder</a></li>
  <li><a href="#ctx_sympkg" id="toc-ctx_sympkg" class="nav-link" data-scroll-target="#ctx_sympkg">ctx_sympkg</a></li>
  </ul></li>
  <li><a href="#gists" id="toc-gists" class="nav-link" data-scroll-target="#gists">Gists</a>
  <ul class="collapse">
  <li><a href="#load_gist" id="toc-load_gist" class="nav-link" data-scroll-target="#load_gist">load_gist</a></li>
  <li><a href="#gist_file" id="toc-gist_file" class="nav-link" data-scroll-target="#gist_file">gist_file</a></li>
  <li><a href="#import_string" id="toc-import_string" class="nav-link" data-scroll-target="#import_string">import_string</a></li>
  <li><a href="#mk_toollist" id="toc-mk_toollist" class="nav-link" data-scroll-target="#mk_toollist">mk_toollist</a></li>
  <li><a href="#import_gist" id="toc-import_gist" class="nav-link" data-scroll-target="#import_gist">import_gist</a></li>
  <li><a href="#update_gist" id="toc-update_gist" class="nav-link" data-scroll-target="#update_gist">update_gist</a></li>
  </ul></li>
  <li><a href="#help" id="toc-help" class="nav-link" data-scroll-target="#help">Help</a>
  <ul class="collapse">
  <li><a href="#dialoghelper_explain_dialog_editing" id="toc-dialoghelper_explain_dialog_editing" class="nav-link" data-scroll-target="#dialoghelper_explain_dialog_editing">dialoghelper_explain_dialog_editing</a></li>
  <li><a href="#solveit_docs" id="toc-solveit_docs" class="nav-link" data-scroll-target="#solveit_docs">solveit_docs</a></li>
  <li><a href="#dialog_link" id="toc-dialog_link" class="nav-link" data-scroll-target="#dialog_link">dialog_link</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/AnswerDotAI/dialoghelper/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div><div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="core.html.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">dialoghelper</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div id="a982e24d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> dialoghelper <span class="im">import</span> <span class="op">*</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="0eac27d1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore <span class="im">import</span> tools</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fastcore.test <span class="im">import</span> <span class="op">*</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="helpers" class="level2">
<h2 class="anchored" data-anchor-id="helpers">Helpers</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L61" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="add_styles" class="level3">
<h3 class="anchored" data-anchor-id="add_styles">add_styles</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_styles(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    s:<span class="bu">str</span>, cls_map:<span class="bu">dict</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add solveit styles to <code>s</code></em></p>
<div id="b9451ad8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> mistletoe</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fasthtml.common <span class="im">import</span> show</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="f13fdf03" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> mistletoe.markdown(<span class="st">"### hi</span><span class="ch">\n\n</span><span class="st">- first</span><span class="ch">\n</span><span class="st">- *second*"</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>s</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'&lt;h3&gt;hi&lt;/h3&gt;\n&lt;ul&gt;\n&lt;li&gt;first&lt;/li&gt;\n&lt;li&gt;&lt;em&gt;second&lt;/em&gt;&lt;/li&gt;\n&lt;/ul&gt;\n'</code></pre>
</div>
</div>
<div id="94c3f587" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>show(s)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<h3 class="anchored">hi</h3>
<ul>
<li>first</li>
<li><em>second</em></li>
</ul>
</div>
</div>
<div id="f1aab712" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>show(add_styles(s))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<h3 class="uk-h3 anchored">hi</h3>
<ul class="uk-list uk-list-bullet space-y-0">
<li class="leading-tight">first</li>
<li class="leading-tight"><em>second</em></li>
</ul>
</div>
</div>
</section>
</section>
<section id="basics" class="level2">
<h2 class="anchored" data-anchor-id="basics">Basics</h2>
<div id="bb0489a1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>a <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>find_var(<span class="st">'a'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>1</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L70" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="find_dname" class="level3">
<h3 class="anchored" data-anchor-id="find_dname">find_dname</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_dname(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    dname:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>*Get the dialog name by searching the call stack for __dialog_name, and resolving <code>dname</code> if supplied.*</p>
<div id="1930a9ce" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>find_dname()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'/aai-ws/dialoghelper/nbs/00_core'</code></pre>
</div>
</div>
<div id="bfecc90c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>find_dname(<span class="st">'index'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'/aai-ws/dialoghelper/nbs/index'</code></pre>
</div>
</div>
<div id="294995f3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>find_dname(<span class="st">'../index'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'/aai-ws/dialoghelper/index'</code></pre>
</div>
</div>
<div id="78e6e1a7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>find_dname(<span class="st">'/foo/bar'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'/foo/bar'</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L92" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="xgeta" class="level3">
<h3 class="anchored" data-anchor-id="xgeta">xgeta</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> xgeta(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    url, kwargs:VAR_KEYWORD</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L90" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="xposta" class="level3">
<h3 class="anchored" data-anchor-id="xposta">xposta</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> xposta(</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    url, kwargs:VAR_KEYWORD</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L114" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="call_endpa" class="level3">
<h3 class="anchored" data-anchor-id="call_endpa">call_endpa</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> call_endpa(</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    path, dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, json:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, raiseex:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="bu">id</span>:NoneType<span class="op">=</span><span class="va">None</span>, data:VAR_KEYWORD</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L110" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="call_endp" class="level3">
<h3 class="anchored" data-anchor-id="call_endp">call_endp</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> call_endp(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    path, dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, json:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, raiseex:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="bu">id</span>:NoneType<span class="op">=</span><span class="va">None</span>, data:VAR_KEYWORD</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L126" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="curr_dialog" class="level3">
<h3 class="anchored" data-anchor-id="curr_dialog">curr_dialog</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> curr_dialog(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    with_messages:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include messages as well?</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get the current dialog info.</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L136" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="msg_idx" class="level3">
<h3 class="anchored" data-anchor-id="msg_idx">msg_idx</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> msg_idx(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Message id to find (defaults to current message)</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get message index from; defaults to current dialog</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get absolute index of message in dialog.</em></p>
<div id="751dd86e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> msg_idx()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>27</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L154" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_html" class="level3">
<h3 class="anchored" data-anchor-id="add_html">add_html</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_html(</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    content:<span class="bu">str</span>, <span class="co"># The HTML to send to the client (generally should include hx-swap-oob)</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Send HTML to the browser to be swapped into the DOM</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L146" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_html_a" class="level3">
<h3 class="anchored" data-anchor-id="add_html_a">add_html_a</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> add_html_a(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    content:<span class="bu">str</span>, <span class="co"># The HTML to send to the client (generally should include hx-swap-oob)</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Send HTML to the browser to be swapped into the DOM</em></p>
<div id="a8e79a9a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> fasthtml.common <span class="im">import</span> <span class="op">*</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="3bc464f8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>add_html(Div(P(<span class="st">'Hi'</span>), hx_swap_oob<span class="op">=</span><span class="st">'beforeend:#dialog-container'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'Content added to DOM'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L168" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_scr" class="level3">
<h3 class="anchored" data-anchor-id="add_scr">add_scr</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add_scr(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    scr, oob:<span class="bu">str</span><span class="op">=</span><span class="st">'innerHTML:#ephemeral'</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Swap a script element to the end of the ephemeral element</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L163" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_scr_a" class="level3">
<h3 class="anchored" data-anchor-id="add_scr_a">add_scr_a</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> add_scr_a(</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    scr, oob:<span class="bu">str</span><span class="op">=</span><span class="st">'innerHTML:#ephemeral'</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Swap a script element to the end of the ephemeral element</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L185" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="iife" class="level3">
<h3 class="anchored" data-anchor-id="iife">iife</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> iife(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>    code:<span class="bu">str</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Wrap javascript code string in an IIFE and execute it via <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#add_html"><code>add_html</code></a></em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L181" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="iife_a" class="level3">
<h3 class="anchored" data-anchor-id="iife_a">iife_a</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> iife_a(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    code:<span class="bu">str</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Wrap javascript code string in an IIFE and execute it via <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#add_html"><code>add_html</code></a></em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L193" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pop_data" class="level3">
<h3 class="anchored" data-anchor-id="pop_data">pop_data</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> pop_data(</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    idx, timeout:<span class="bu">int</span><span class="op">=</span><span class="dv">15</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L190" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="pop_data_a" class="level3">
<h3 class="anchored" data-anchor-id="pop_data_a">pop_data_a</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> pop_data_a(</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    idx, timeout:<span class="bu">int</span><span class="op">=</span><span class="dv">15</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L203" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="fire_event" class="level3">
<h3 class="anchored" data-anchor-id="fire_event">fire_event</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fire_event(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    evt:<span class="bu">str</span>, data:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L202" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="fire_event_a" class="level3">
<h3 class="anchored" data-anchor-id="fire_event_a">fire_event_a</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> fire_event_a(</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    evt:<span class="bu">str</span>, data:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L216" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="event_get" class="level3">
<h3 class="anchored" data-anchor-id="event_get">event_get</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> event_get(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    evt:<span class="bu">str</span>, timeout:<span class="bu">int</span><span class="op">=</span><span class="dv">15</span>, data:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Call <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#fire_event"><code>fire_event</code></a> and then <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#pop_data"><code>pop_data</code></a> to get a response</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L210" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="event_get_a" class="level3">
<h3 class="anchored" data-anchor-id="event_get_a">event_get_a</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> event_get_a(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    evt:<span class="bu">str</span>, timeout:<span class="bu">int</span><span class="op">=</span><span class="dv">15</span>, data:NoneType<span class="op">=</span><span class="va">None</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Call <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#fire_event"><code>fire_event</code></a> and then <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#pop_data"><code>pop_data</code></a> to get a response</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L223" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="trigger_now" class="level3">
<h3 class="anchored" data-anchor-id="trigger_now">trigger_now</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> trigger_now(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    evt, data:NoneType<span class="op">=</span><span class="va">None</span>, ttl:<span class="bu">int</span><span class="op">=</span><span class="dv">5000</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Synchronously trigger a browser event, safe against replay</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L236" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="display_response" class="level3">
<h3 class="anchored" data-anchor-id="display_response">display_response</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> display_response(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    display:<span class="bu">str</span>, result:<span class="bu">str</span><span class="op">=</span><span class="va">None</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return a special response where <code>display</code> is added as markdown/HTML to the prompt output, and <code>result</code> is returned to the LLM</em></p>
</section>
</section>
<section id="run-python" class="level2">
<h2 class="anchored" data-anchor-id="run-python">Run python</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L246" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="set_pyrun" class="level3">
<h3 class="anchored" data-anchor-id="set_pyrun">set_pyrun</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> set_pyrun(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    rp:RunPython</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Replace the default RunPython used by msg_pyrun</em></p>
<div id="45788ef2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> pyrun(<span class="st">'[]'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[]</code></pre>
</div>
</div>
<div id="efa416ee" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> pyrun(<span class="st">'Path().exists()'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>True</code></pre>
</div>
</div>
<div id="9f0b2705" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> f(): warnings.warn(<span class="st">'a warning'</span>)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>allow(<span class="st">'f'</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> pyrun(<span class="st">'print("asdf"); f(); 1+1'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'stdout': 'asdf\n',
 'stderr': "/var/folders/51/b2_szf2945n072c0vj2cyty40000gn/T/ipykernel_86492/3774884187.py:1: UserWarning: a warning\n  def f(): warnings.warn('a warning')\n",
 'result': 2}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L252" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="doc" class="level3">
<h3 class="anchored" data-anchor-id="doc">doc</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> doc(</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    sym</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">-&gt;</span><span class="bu">str</span>:</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get documentation (signature, docstring, + docments if they exist) for <code>sym</code>.</em> <strong>NB</strong>: This is not an llm tool, so must be run with python(). <code>sym</code> must be available in the namespace.</p>
</section>
</section>
<section id="viewedit-dialog" class="level2">
<h2 class="anchored" data-anchor-id="viewedit-dialog">View/edit dialog</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L270" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="read_msg" class="level3">
<h3 class="anchored" data-anchor-id="read_msg">read_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> read_msg(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    n:<span class="bu">int</span><span class="op">=-</span><span class="dv">1</span>, <span class="co"># Message index (if relative, +ve is downwards)</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    relative:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Is `n` relative to current message (True) or absolute (False)?</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Message id to find (defaults to current message)</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    view_range:<span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional 1-indexed (start, end) line range for files, end=-1 for EOF</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    nums:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Whether to show line numbers</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get the message indexed in the current dialog.</em> NB: Messages in the current dialog above the current message are <em>already</em> visible; use this only when you need line numbers for editing operations, or for messages not in the current dialog or below the current message. - To get the exact message use <code>n=0</code> and <code>relative=True</code> together with <code>id</code>. - To get a relative message use <code>n</code> (relative position index). - To get the nth message use <code>n</code> with <code>relative=False</code>, e.g <code>n=0</code> first message, <code>n=-1</code> last message. If <code>dname</code> is None, the current dialog is used. If it is an open dialog, it will be updated interactively with real-time updates to the browser. If it is a closed dialog, it will be updated on disk. Dialog names must be paths relative to solveit root (if starting with <code>/</code>, e.g.&nbsp;<code>/myproject/dlg</code>) or relative to the current dialogâ€™s folder (if not starting with <code>/</code>), and should <em>not</em> include the .ipynb extension. <strong>Use absolute paths when targeting dialogs outside the current dialogâ€™s folder tree.</strong></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L292" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="find_msgs" class="level3">
<h3 class="anchored" data-anchor-id="find_msgs">find_msgs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> find_msgs(</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>    re_pattern:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Optional regex to search for (re.DOTALL+re.MULTILINE is used)</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>    msg_type:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># optional limit by message type ('code', 'note', or 'prompt')</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>    use_case:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Use case-sensitive matching?</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    use_regex:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Use regex matching?</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    only_err:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Only return messages that have errors?</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    only_exp:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Only return messages that are exported?</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    only_chg:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Only return messages that have changed vs git HEAD?</span></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Optionally filter by comma-separated list of message ids</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    limit:<span class="bu">int</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optionally limit number of returned items</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    include_output:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include output in returned dict?</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    include_meta:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include all additional message metadata</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    as_xml:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Use concise unescaped XML output format</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    nums:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Show line numbers?</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>    trunc_out:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Middle-out truncate code output to 100 characters?</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    trunc_in:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Middle-out truncate cell content to 80 characters?</span></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    headers_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Only return note messages that are headers (first line only); cannot be used together with `header_section`</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>    header_section:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Find section starting with this header; returns it plus all children (i.e until next header of equal or more significant level)</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>)<span class="op">-&gt;</span><span class="bu">list</span>: <span class="co"># Messages in requested dialog that contain the given information</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Often it is more efficient to call <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#view_dlg"><code>view_dlg</code></a> to see the whole dialog at once, so you can use it all from then on, instead of using <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#find_msgs"><code>find_msgs</code></a>.</em> If <code>dname</code> is None, the current dialog is used. If it is an open dialog, it will be updated interactively with real-time updates to the browser. If it is a closed dialog, it will be updated on disk. Dialog names must be paths relative to solveit root (if starting with <code>/</code>, e.g.&nbsp;<code>/myproject/dlg</code>) or relative to the current dialogâ€™s folder (if not starting with <code>/</code>), and should <em>not</em> include the .ipynb extension. <strong>Use absolute paths when targeting dialogs outside the current dialogâ€™s folder tree.</strong> Message ids are identical to those in LLM chat history, so do NOT call this to view a specific message if itâ€™s in the chat historyâ€“instead use <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#view_msg"><code>view_msg</code></a>. Do NOT use find_msgs to view message content in the current dialog above the current prompt â€“ these are <em>already</em> provided in LLM context, so just read the content there directly. (NB: LLM context only includes messages <em>above</em> the current prompt, whereas <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#find_msgs"><code>find_msgs</code></a> can access <em>all</em> messages.) To refer to a found message from code or tools, use its <code>id</code> field.</p>
<div id="aa444dff" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># NB: must have a dialogue open including a message with this text in its content</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>txt <span class="op">=</span> <span class="st">'tools'</span></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>found <span class="op">=</span> <span class="cf">await</span> find_msgs(txt)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="8ce548d6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="op">+</span><span class="dv">1</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>2</code></pre>
</div>
</div>
<div id="df4be3ff" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="cf">await</span> find_msgs(<span class="vs">r'1</span><span class="ch">\+</span><span class="vs">1'</span>, include_meta<span class="op">=</span><span class="va">False</span>, include_output<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>r</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[{'id': '_9f0b2705', 'is_exported': 0, 'content': 'def f(): warnings.warn(\'a warning\')\nallow(\'f\')\nawait pyrun(\'print("asdf"); f(); 1+1\')', 'output': '{&amp;#x27;stdout&amp;#x27;: &amp;#x27;asdf\\n&amp;#x27;,\n &amp;#x27;stderr&amp;#x27;: &amp;quot;/var/folders/51/b2_szf2945n072c0vj2cyty40000gn/T/ipykernel_86492/3774884187.py:1: UserWarning: a warning\\n  def f(): warnings.warn(&amp;#x27;a warning&amp;#x27;)\\n&amp;quot;,\n &amp;#x27;result&amp;#x27;: 2}', 'msg_type': 'code'}, {'id': '_8ce548d6', 'is_exported': 0, 'content': '1+1', 'output': '2', 'msg_type': 'code'}, {'id': '_44cb1b2a', 'is_exported': 0, 'content': "_id = await _add_msg_unsafe('1+1', run=True, msg_type='code')", 'output': '', 'msg_type': 'code'}]</code></pre>
</div>
</div>
<div id="bd06bf55" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>hl_md(<span class="cf">await</span> find_msgs(<span class="vs">r'1</span><span class="ch">\+</span><span class="vs">1'</span>, include_meta<span class="op">=</span><span class="va">False</span>, as_xml<span class="op">=</span><span class="va">True</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="prose">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb61"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">msgs</span><span class="dt">&gt;&lt;</span><span class="kw">code</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_9f0b2705"</span><span class="dt">&gt;&lt;</span><span class="kw">source</span><span class="dt">&gt;</span>def f(): warnings.warn('a warning')</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>allow('f')</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>await pyrun('print("asdf"); f(); 1+1')<span class="dt">&lt;</span><span class="kw">out</span><span class="dt">&gt;</span>{<span class="dv">&amp;#x27;</span>stdout<span class="dv">&amp;#x27;</span>: <span class="dv">&amp;#x27;</span>asdf\n<span class="dv">&amp;#x27;</span>,</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a> <span class="dv">&amp;#x27;</span>stderr<span class="dv">&amp;#x27;</span>: <span class="dv">&amp;quot;</span>/var/folders/51/b2_szf2945n072c0vj2cyty40000gn/T/ipykernel_86492/3774884187.py:1: UserWarning: a warning\n  def f(): warnings.warn(<span class="dv">&amp;#x27;</span>a warning<span class="dv">&amp;#x27;</span>)\n<span class="dv">&amp;quot;</span>,</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a> <span class="dv">&amp;#x27;</span>result<span class="dv">&amp;#x27;</span>: 2}<span class="dt">&lt;/</span><span class="kw">out</span><span class="dt">&gt;&lt;/</span><span class="kw">code</span><span class="dt">&gt;&lt;</span><span class="kw">code</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_8ce548d6"</span><span class="dt">&gt;&lt;</span><span class="kw">source</span><span class="dt">&gt;</span>1+1<span class="dt">&lt;</span><span class="kw">out</span><span class="dt">&gt;</span>2<span class="dt">&lt;/</span><span class="kw">out</span><span class="dt">&gt;&lt;/</span><span class="kw">code</span><span class="dt">&gt;&lt;</span><span class="kw">code</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_44cb1b2a"</span><span class="dt">&gt;</span>_id = await _add_msg_unsafe('1+1', run=True, msg_type='code')<span class="dt">&lt;/</span><span class="kw">code</span><span class="dt">&gt;&lt;/</span><span class="kw">msgs</span><span class="dt">&gt;</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L326" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="view_dlg" class="level3">
<h3 class="anchored" data-anchor-id="view_dlg">view_dlg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> view_dlg(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    msg_type:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># optional limit by message type ('code', 'note', or 'prompt')</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    nums:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Whether to show line numbers</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    include_output:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include output in returned dict?</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    trunc_out:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Middle-out truncate code output to 100 characters (only applies if `include_output`)?</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>    trunc_in:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Middle-out truncate cell content to 80 characters?</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Concise XML view of all messages (optionally filtered by type), not including metadata. Often it is more efficient to call this to see the whole dialog at once (including line numbers if needed), instead of running <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#find_msgs"><code>find_msgs</code></a> or <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#view_msg"><code>view_msg</code></a> multiple times.</em></p>
<div id="b5cb1f3b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>hl_md((<span class="cf">await</span> view_dlg(nums<span class="op">=</span><span class="va">True</span>))[:<span class="dv">500</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="prose">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb64"><pre class="sourceCode html code-with-copy"><code class="sourceCode html"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">msgs</span><span class="dt">&gt;&lt;</span><span class="kw">code</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_955b9784"</span><span class="dt">&gt;</span>     1 â”‚ #| default_exp core<span class="dt">&lt;/</span><span class="kw">code</span><span class="dt">&gt;&lt;</span><span class="kw">code</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_a982e24d"</span><span class="dt">&gt;</span>     1 â”‚ from dialoghelper import *<span class="dt">&lt;/</span><span class="kw">code</span><span class="dt">&gt;&lt;</span><span class="kw">note</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_0aafe008"</span><span class="dt">&gt;</span>     1 â”‚ # dialoghelper<span class="dt">&lt;/</span><span class="kw">note</span><span class="dt">&gt;&lt;</span><span class="kw">code</span><span class="ot"> id</span><span class="op">=</span><span class="st">"_468aa264"</span><span class="ot"> export</span><span class="dt">&gt;</span>     1 â”‚ import re,inspect,ast,collections,time,asyncio,json,linecache,importlib,difflib,uuid</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>     2 â”‚ </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>     3 â”‚ from typing import Dict</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>     4 â”‚ from tempfile import TemporaryDirectory</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>     5 â”‚ from ipykernel_helper import *</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>     6 â”‚ from dataclasses import dataclass</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>     7 â”‚ from os.path impor</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L376" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_msg" class="level3">
<h3 class="anchored" data-anchor-id="add_msg">add_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> add_msg(</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>    content:<span class="bu">str</span>, <span class="co"># Content of the message (i.e the message prompt, code, or note text)</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    placement:<span class="bu">str</span><span class="op">=</span><span class="st">'add_after'</span>, <span class="co"># Can be 'at_start' or 'at_end', and for default dname can also be 'add_after' or 'add_before'</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># id of message that placement is relative to (if None, uses current message)</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog (`run` only has a effect if dialog is currently running)</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    msg_type:<span class="bu">str</span><span class="op">=</span><span class="st">'note'</span>, <span class="co"># Message type, can be 'code', 'note', or 'prompt'</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    output:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Prompt/code output; Code outputs must be .ipynb-compatible JSON array</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    time_run:<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="st">''</span>, <span class="co"># When was message executed</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    is_exported:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Export message to a module?</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a>    skipped:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Hide message from prompt?</span></span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a>    i_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Collapse input?</span></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a>    o_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Collapse output?</span></span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>    heading_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Collapse heading section?</span></span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>    pinned:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Pin to context?</span></span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a>)<span class="op">-&gt;</span><span class="bu">str</span>: <span class="co"># Message ID of newly created message</span></span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add/update a message to the queue to show after code execution completes.</em> <strong>NB</strong>: when creating multiple messages in a row, after the 1st message set <code>id</code> to the result of the last <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#add_msg"><code>add_msg</code></a> call, otherwise messages will appear in the dialog in REVERSE order. If <code>dname</code> is None, the current dialog is used. If it is an open dialog, it will be updated interactively with real-time updates to the browser. If it is a closed dialog, it will be updated on disk. Dialog names must be paths relative to solveit root (if starting with <code>/</code>, e.g.&nbsp;<code>/myproject/dlg</code>) or relative to the current dialogâ€™s folder (if not starting with <code>/</code>), and should <em>not</em> include the .ipynb extension. <strong>Use absolute paths when targeting dialogs outside the current dialogâ€™s folder tree.</strong></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L389" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="add_prompt" class="level3">
<h3 class="anchored" data-anchor-id="add_prompt">add_prompt</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> add_prompt(</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    content:<span class="bu">str</span>, <span class="co"># Prompt to run</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Dialog to run prompt in; defaults to current dialog</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    msg_id:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Message id to place prompt after (if None, places at end)</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    wait:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Wait for and return response?</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>    poll:<span class="bu">float</span><span class="op">=</span><span class="fl">0.5</span>, <span class="co"># Frequency of polling to check for completion</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    placement:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Location to place message, defaults to 'at_end' if no msg_id</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># id of message that placement is relative to (if None, uses current message)</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    output:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Prompt/code output; Code outputs must be .ipynb-compatible JSON array</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    time_run:<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="st">''</span>, <span class="co"># When was message executed</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    is_exported:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Export message to a module?</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>    skipped:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Hide message from prompt?</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>    i_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Collapse input?</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>    o_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Collapse output?</span></span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a>    heading_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Collapse heading section?</span></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>    pinned:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="dv">0</span>, <span class="co"># Pin to context?</span></span>
<span id="cb66-18"><a href="#cb66-18" aria-hidden="true" tabindex="-1"></a>): <span class="co"># Message ID of newly created message</span></span>
<span id="cb66-19"><a href="#cb66-19" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Run a prompt and, if <code>wait</code>, wait for and return the response text</em></p>
<div id="d28405ce" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> add_msg(<span class="st">'testing'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L410" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="read_msgid" class="level3">
<h3 class="anchored" data-anchor-id="read_msgid">read_msgid</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> read_msgid(</span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span>, <span class="co"># Message id to find</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    view_range:<span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional 1-indexed (start, end) line range for files, end=-1 for EOF</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    nums:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Whether to show line numbers</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get message from; defaults to current dialog</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    add_to_dlg:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Whether to add message content to current dialog (as a raw message)</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get message <code>id</code>. Message IDs can be view directly in LLM chat history/context, or found in <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#find_msgs"><code>find_msgs</code></a> results.</em> Use <code>add_to_dlg</code> if the LLM or human may need to refer to the message content again later. If <code>dname</code> is None, the current dialog is used. If it is an open dialog, it will be updated interactively with real-time updates to the browser. If it is a closed dialog, it will be updated on disk. Dialog names must be paths relative to solveit root (if starting with <code>/</code>, e.g.&nbsp;<code>/myproject/dlg</code>) or relative to the current dialogâ€™s folder (if not starting with <code>/</code>), and should <em>not</em> include the .ipynb extension. <strong>Use absolute paths when targeting dialogs outside the current dialogâ€™s folder tree.</strong></p>
<div id="ebf0d896" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>r <span class="op">=</span> <span class="cf">await</span> read_msg(<span class="op">-</span><span class="dv">2</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(<span class="op">-</span><span class="dv">2</span>)).content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>testing</code></pre>
</div>
</div>
<p><a href="https://AnswerDotAI.github.io/dialoghelper/core.html#read_msg"><code>read_msg</code></a> (and all endpoints that return json) wrap responses in <code>dict2obj</code>, so you can use either dict or object syntax.</p>
<div id="679f80cf" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>bmsg <span class="op">=</span> <span class="cf">await</span> add_msg(<span class="st">'at bottom'</span>, placement<span class="op">=</span><span class="st">'at_end'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="a67fc2f2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span>(<span class="cf">await</span> msg_idx(bmsg)<span class="op">&gt;</span><span class="cf">await</span> msg_idx(_id)<span class="op">+</span><span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L426" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="view_msg" class="level3">
<h3 class="anchored" data-anchor-id="view_msg">view_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> view_msg(</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span>, <span class="co"># Message id to view</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get message from; defaults to current dialog</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    nums:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Whether to show line numbers</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    view_range:<span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional 1-indexed (start, end) line range for files, end=-1 for EOF. Rarely needed--read whole message in nearly all cases instead</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    add_to_dlg:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Whether to add message content to current dialog (as a raw message)</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Views the </em>content* of message <code>id</code>. Same as <code>read_msgid(...)['content']</code>, defaulting to <code>nums=True</code>.<em> Use <code>add_to_dlg</code> if the LLM or human may need to refer to the message content again later. If <code>dname</code> is None, the current dialog is used. If it is an open dialog, it will be updated interactively with real-time updates to the browser. If it is a closed dialog, it will be updated on disk. Dialog names must be paths relative to solveit root (if starting with <code>/</code>, e.g.&nbsp;<code>/myproject/dlg</code>) or relative to the current dialogâ€™s folder (if not starting with <code>/</code>), and should </em>not* include the .ipynb extension. <strong>Use absolute paths when targeting dialogs outside the current dialogâ€™s folder tree.</strong></p>
<div id="5a837899" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> view_msg(r.<span class="bu">id</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ testing</code></pre>
</div>
</div>
<div id="376b6e07" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dh_settings['dname'] = 'tmp'</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># _id = await add_msg('testing', placement='at_end')</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co"># print(_id)</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># del(dh_settings['dname'])</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L442" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="del_msg" class="level3">
<h3 class="anchored" data-anchor-id="del_msg">del_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> del_msg(</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># id of message to delete</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    log_changed:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Add a note showing the deleted content?</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete a message from the dialog. DO NOT USE THIS unless you have been explicitly instructed to delete messages.</em></p>
<div id="9c6c959b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(bmsg)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<div id="44cb1b2a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> _add_msg_unsafe(<span class="st">'1+1'</span>, run<span class="op">=</span><span class="va">True</span>, msg_type<span class="op">=</span><span class="st">'code'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="8f1e0ee6" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<div id="da3525d7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> _add_msg_unsafe(<span class="st">'Hi'</span>, run<span class="op">=</span><span class="va">True</span>, msg_type<span class="op">=</span><span class="st">'prompt'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="4b0077ef" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L471" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="update_msg" class="level3">
<h3 class="anchored" data-anchor-id="update_msg">update_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> update_msg(</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># id of message to update (if None, uses current message)</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    msg:Optional<span class="op">=</span><span class="va">None</span>, <span class="co"># Dictionary of field keys/values to update</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to get info for; defaults to current dialog</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    log_changed:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Add a note showing the diff?</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>    content:<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Content of the message (i.e the message prompt, code, or note text)</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    msg_type:<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Message type, can be 'code', 'note', or 'prompt'</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>    output:<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Prompt/code output; Code outputs must be .ipynb-compatible JSON array</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    time_run:<span class="bu">str</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># When was message executed</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>    is_exported:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Export message to a module?</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>    skipped:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Hide message from prompt?</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>    i_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Collapse input?</span></span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>    o_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Collapse output?</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>    heading_collapsed:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Collapse heading section?</span></span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>    pinned:<span class="bu">int</span> <span class="op">|</span> <span class="va">None</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Pin to context?</span></span>
<span id="cb86-17"><a href="#cb86-17" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb86-18"><a href="#cb86-18" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Update an existing message. Provide either <code>msg</code> OR field key/values to update.</em> - Use <code>content</code> param to update contents. - Only include parameters to updateâ€“missing ones will be left unchanged. If <code>dname</code> is None, the current dialog is used. If it is an open dialog, it will be updated interactively with real-time updates to the browser. If it is a closed dialog, it will be updated on disk. Dialog names must be paths relative to solveit root (if starting with <code>/</code>, e.g.&nbsp;<code>/myproject/dlg</code>) or relative to the current dialogâ€™s folder (if not starting with <code>/</code>), and should <em>not</em> include the .ipynb extension. <strong>Use absolute paths when targeting dialogs outside the current dialogâ€™s folder tree.</strong></p>
<div id="4df69d72" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> add_msg(<span class="st">'testing'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="05b509a7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> update_msg(_id, content<span class="op">=</span><span class="st">'toasting'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="8eaf1438" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> update_msg(_id, skipped<span class="op">=</span><span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="f6d1d6e1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>msg <span class="op">=</span> <span class="cf">await</span> read_msgid(_id)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>msg[<span class="st">'content'</span>] <span class="op">=</span> <span class="st">'toasted'</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> update_msg(msg<span class="op">=</span>msg)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'_b57b4b4a'</code></pre>
</div>
</div>
<div id="ae95747a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<div id="ab9d75ec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>_edit_id <span class="op">=</span> <span class="cf">await</span> add_msg(<span class="st">'This message should be found.</span><span class="ch">\n\n</span><span class="st">This is a multiline message.'</span>)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>_edit_id</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'_32a933a6'</code></pre>
</div>
</div>
<div id="22ecf206" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg())[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>5th line
This should go to the 1st line
last line</code></pre>
</div>
</div>
<div id="6d53e2dd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>))[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ This message should be found.
     2 â”‚ 
     3 â”‚ This is a multiline message.</code></pre>
</div>
</div>
<div id="eda5f04b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>, view_range<span class="op">=</span>[<span class="dv">2</span>,<span class="dv">3</span>]))[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     2 â”‚ 
     3 â”‚ This is a multiline message.</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L495" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="run_msg" class="level3">
<h3 class="anchored" data-anchor-id="run_msg">run_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb102"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> run_msg(</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Comma-separated ids of message(s) to execute</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Running dialog to get info for; defaults to current dialog. (Note dialog *must* be running for this function)</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Adds a message to the run queue. Use read_msg to see the output once it runs.</em></p>
<div id="6e1c440e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>codeid <span class="op">=</span> (<span class="cf">await</span> read_msg())[<span class="st">'id'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="7084f544" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> run_msg(codeid)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'queued'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L504" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="copy_msg" class="level3">
<h3 class="anchored" data-anchor-id="copy_msg">copy_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> copy_msg(</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Comma-separated ids of message(s) to copy</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    cut:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Cut message(s)? (If not, copies)</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Running dialog to copy messages from; defaults to current dialog. (Note dialog *must* be running for this function)</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add <code>ids</code> to clipboard.</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L516" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="paste_msg" class="level3">
<h3 class="anchored" data-anchor-id="paste_msg">paste_msg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> paste_msg(</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Message id to paste next to</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    after:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Paste after id? (If not, pastes before)</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Running dialog to copy messages from; defaults to current dialog. (Note dialog *must* be running for this function)</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Paste clipboard msg(s) after/before the current selected msg (id).</em></p>
<div id="bc91a8d8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> copy_msg(codeid)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'complete'}</code></pre>
</div>
</div>
<div id="aa765fbc" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a>test_eq((<span class="cf">await</span> copy_msg(<span class="st">'_fake'</span>, dname<span class="op">=</span><span class="st">'/dlg/nonexistent'</span>))[<span class="st">'error'</span>], <span class="st">'Dialog /dlg/nonexistent may not be running, or message not found'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="cb519067" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>tgt <span class="op">=</span> (<span class="cf">await</span> read_msg())[<span class="st">'id'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="784f644c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> paste_msg(tgt)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'complete'}</code></pre>
</div>
</div>
<div id="a99fea71" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>test_eq((<span class="cf">await</span> paste_msg(<span class="st">'_fake'</span>, dname<span class="op">=</span><span class="st">'/dlg/nonexistent'</span>))[<span class="st">'error'</span>], <span class="st">'Dialog /dlg/nonexistent may not be running, or message not found'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="084f2a60" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>newmsg <span class="op">=</span> <span class="cf">await</span> read_msg(<span class="dv">1</span>, <span class="bu">id</span><span class="op">=</span>tgt)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>newmsg[<span class="st">'content'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'async def run_msg(\n    ids:str=None, # Comma-separated ids of message(s) to execute\n    dname:str=\'\' # Running dialog to get info for; defaults to current dialog. (Note dialog *must* be running for this function)\n):\n    "Adds a message to the run queue. Use read_msg to see the output once it runs."\n    return await call_endpa(\'add_runq_\', dname, ids=ids, json=True)'</code></pre>
</div>
</div>
<div id="527dc036" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(newmsg[<span class="st">'id'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L528" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="enable_mermaid" class="level3">
<h3 class="anchored" data-anchor-id="enable_mermaid">enable_mermaid</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> enable_mermaid(</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="f2a4de16" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>enable_mermaid()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<script type="module">
if (window.mermaid) mermaid.run()
else {
    import('https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs').then(m => {
        window.mermaid = m.default;
        window.mermaid.run();
        htmx.onLoad(elt => {
            if (elt.matches('div.mermaid, pre.mermaid') || htmx.findAll(elt, 'div.mermaid, pre.mermaid')) window.mermaid.run();
        });
    });
}</script>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L542" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="mermaid" class="level3">
<h3 class="anchored" data-anchor-id="mermaid">mermaid</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mermaid(</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    code, cls:<span class="bu">str</span><span class="op">=</span><span class="st">'mermaid'</span>, kwargs:VAR_KEYWORD</span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>A mermaid diagram</em></p>
<div id="b90326a2" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>mermaid(<span class="st">'graph LR; A[Start] --&gt; B[Process]; B --&gt; C[End];'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div class="mermaid">graph LR; A[Start] --&gt; B[Process]; B --&gt; C[End];</div>
</div>
</div>
<p>You can also add to a note:</p>
<pre><code>```mermaid
graph LR
A[Start] --&gt; B[Process]
B --&gt; C[End]
```</code></pre>
<p>This renders as:</p>
<pre class="mermaid"><code>graph LR
A[Start] --&gt; B[Process]
B --&gt; C[End]</code></pre>
<p>You can also add to a note:</p>
<pre><code>```mermaid
graph LR
A[Start] --&gt; B[Process]
B --&gt; C[End]
```</code></pre>
<p>This renders as:</p>
<pre><code>graph LR
A[Start] --&gt; B[Process]
B --&gt; C[End]</code></pre>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L548" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="toggle_header" class="level3">
<h3 class="anchored" data-anchor-id="toggle_header">toggle_header</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> toggle_header(</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span>, <span class="co"># id of markdown header note message to toggle collapsed state</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Running dialog to copy messages from; defaults to current dialog. (Note dialog *must* be running for this function)</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Toggle collapsed header state for <code>id</code></em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L558" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="toggle_bookmark" class="level3">
<h3 class="anchored" data-anchor-id="toggle_bookmark">toggle_bookmark</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> toggle_bookmark(</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span>, <span class="co"># id of message to toggle bookmark on</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    n:<span class="bu">int</span>, <span class="co"># Bookmark number (1-9)</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to set bookmark in; defaults to current dialog</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Toggle numbered bookmark (1-9) on a message, clearing it from any other message when setting</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L568" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="toggle_comment" class="level3">
<h3 class="anchored" data-anchor-id="toggle_comment">toggle_comment</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> toggle_comment(</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">id</span>:<span class="bu">str</span>, <span class="co"># id of code message (or comma-separated ids) to toggle comments on</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>    dname:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Dialog to toggle comments in; defaults to current dialog. (Note dialog *must* be running for this function)</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Toggle line comments on code message(s). If any lines are uncommented, comments all; otherwise uncomments all.</em></p>
<div id="6f54addd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> toggle_comment(codeid) <span class="co"># comment</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> toggle_comment(codeid) <span class="co"># uncomment</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'complete'}</code></pre>
</div>
</div>
<div id="8dea3f1c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>test_eq((<span class="cf">await</span> toggle_comment(<span class="st">'_fake'</span>, dname<span class="op">=</span><span class="st">'/dlg/nonexistent'</span>))[<span class="st">'error'</span>], <span class="st">'Dialog /dlg/nonexistent may not be running, or message not found'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<section id="test-header" class="level4">
<h4 class="anchored" data-anchor-id="test-header">test header</h4>
</section>
<section id="header-end" class="level4">
<h4 class="anchored" data-anchor-id="header-end">header end</h4>
<div id="643167c3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>hdid <span class="op">=</span> (<span class="cf">await</span> read_msg())[<span class="st">'id'</span>]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="c66d782b" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> toggle_header(hdid)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'complete'}</code></pre>
</div>
</div>
<div id="784766d8" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>test_eq((<span class="cf">await</span> toggle_header(<span class="st">'_fake'</span>, dname<span class="op">=</span><span class="st">'/dlg/nonexistent'</span>))[<span class="st">'error'</span>], <span class="st">'Dialog /dlg/nonexistent may not be running, or message not found'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="dlg-conveniences" class="level3">
<h3 class="anchored" data-anchor-id="dlg-conveniences">Dlg conveniences</h3>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L579" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="url2note" class="level3">
<h3 class="anchored" data-anchor-id="url2note">url2note</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb137"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> url2note(</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    url:<span class="bu">str</span>, <span class="co"># URL to read</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    extract_section:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># If url has an anchor, return only that section</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>    selector:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Select section(s) using BeautifulSoup.select (overrides extract_section)</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>    ai_img:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Make images visible to the AI</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>    split_re:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Regex to split content into multiple notes, set to '' for single note</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Read URL as markdown, and add note(s) below current message with the result</em></p>
<div id="b90ff705" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a>_id <span class="op">=</span> <span class="cf">await</span> url2note(<span class="st">'https://www.example.org'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="fca3268c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb139"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L594" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="create_or_run_dialog" class="level3">
<h3 class="anchored" data-anchor-id="create_or_run_dialog">create_or_run_dialog</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb141"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> create_or_run_dialog(</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    name:<span class="bu">str</span>, <span class="co"># Name/path of the dialog (relative to current dialog's folder, or absolute if starts with '/')</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Create a new dialog, or set an existing one running</em></p>
<div id="1dd50b03" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> create_or_run_dialog(<span class="st">'test_dialog'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': '"aai-ws/dialoghelper/nbs/test_dialog" is now running'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L603" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="stop_dialog" class="level3">
<h3 class="anchored" data-anchor-id="stop_dialog">stop_dialog</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> stop_dialog(</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    name:<span class="bu">str</span>, <span class="co"># Name/path of the dialog (relative to current dialog's folder, or absolute if starts with '/')</span></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Stop a running dialog kernel</em></p>
<div id="3775b605" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> stop_dialog(<span class="st">'test_dialog'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'dialog stopped'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L611" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="rm_dialog" class="level3">
<h3 class="anchored" data-anchor-id="rm_dialog">rm_dialog</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> rm_dialog(</span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    name:<span class="bu">str</span>, <span class="co"># Name/path of the dialog to delete (relative to current dialog's folder, or absolute if starts with '/')</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Delete a dialog (or folder) and associated records, stopping the kernel if running</em></p>
<div id="de14cbc3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb148"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> rm_dialog(<span class="st">'test_dialog'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'success': 'deleted "/Users/jhoward/aai-ws/dialoghelper/nbs/test_dialog"'}</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L620" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="run_code_interactive" class="level3">
<h3 class="anchored" data-anchor-id="run_code_interactive">run_code_interactive</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb150"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> run_code_interactive(</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>    code:<span class="bu">str</span>, <span class="co"># Code to have user run</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Insert code into userâ€™s dialog and request for the user to run it. Use other tools where possible, </em> but if they can not find needed information, <em>ALWAYS</em> use this instead of guessing or giving up. IMPORTANT: This tool is TERMINAL - after calling it, you MUST stop all tool usage and wait for user response. Never call additional tools after this one.</p>
</section>
</section>
<section id="text-edit" class="level2">
<h2 class="anchored" data-anchor-id="text-edit">Text Edit</h2>
<div id="10a14307" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> msg_insert_line(_edit_id, <span class="dv">0</span>, <span class="st">'This should go to the first line'</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> msg_insert_line(_edit_id, <span class="dv">3</span>, <span class="st">'This should go to the 4th line'</span>)</span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="cf">await</span> msg_insert_line(_edit_id, <span class="dv">5</span>, <span class="st">'This should go to the last line'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -5 +5,2 @@
 This is a multiline message.
+This should go to the last line</code></pre>
</div>
</div>
<div id="53264093" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb153"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>))[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ This should go to the first line
     2 â”‚ This message should be found.
     3 â”‚ 
     4 â”‚ This should go to the 4th line
     5 â”‚ This is a multiline message.
     6 â”‚ This should go to the last line</code></pre>
</div>
</div>
<div id="7fb271dd" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="cf">await</span> msg_str_replace(_edit_id, <span class="st">'This should go to the first line'</span>, <span class="st">'This should go to the 1st line'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -1,2 +1,2 @@
-This should go to the first line
+This should go to the 1st line
 This message should be found.</code></pre>
</div>
</div>
<div id="fab1351f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>))[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ This should go to the 1st line
     2 â”‚ This message should be found.
     3 â”‚ 
     4 â”‚ This should go to the 4th line
     5 â”‚ This is a multiline message.
     6 â”‚ This should go to the last line</code></pre>
</div>
</div>
<div id="baed4dec" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="cf">await</span> msg_strs_replace(_edit_id, [<span class="st">'This is a multiline message.'</span>, <span class="st">'This should go to the last line'</span>], [<span class="st">'5th line'</span>, <span class="st">'last line'</span>]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -4,3 +4,3 @@
 This should go to the 4th line
-This is a multiline message.
-This should go to the last line
+5th line
+last line</code></pre>
</div>
</div>
<div id="8d1ff40a" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>))[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ This should go to the 1st line
     2 â”‚ This message should be found.
     3 â”‚ 
     4 â”‚ This should go to the 4th line
     5 â”‚ 5th line
     6 â”‚ last line</code></pre>
</div>
</div>
<div id="a087b570" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="cf">await</span> msg_replace_lines(_edit_id, <span class="dv">2</span>, <span class="dv">4</span>,<span class="st">'line 2</span><span class="ch">\n</span><span class="st">line 3</span><span class="ch">\n</span><span class="st">line 4</span><span class="ch">\n</span><span class="st">'</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -1,5 +1,5 @@
 This should go to the 1st line
-This message should be found.
-
-This should go to the 4th line
+line 2
+line 3
+line 4
 5th line</code></pre>
</div>
</div>
<div id="86e28340" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>))[<span class="st">'content'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ This should go to the 1st line
     2 â”‚ line 2
     3 â”‚ line 3
     4 â”‚ line 4
     5 â”‚ 5th line
     6 â”‚ last line</code></pre>
</div>
</div>
<div id="fd38ca34" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="cf">await</span> msg_del_lines(_edit_id, <span class="dv">2</span>, <span class="dv">4</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -1,5 +1,2 @@
 This should go to the 1st line
-line 2
-line 3
-line 4
 5th line</code></pre>
</div>
</div>
<div id="1c2dcb37" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb169"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>)).content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ This should go to the 1st line
     2 â”‚ 5th line
     3 â”‚ last line</code></pre>
</div>
</div>
<div id="ed59aa6f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb171"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="cf">await</span> msg_pyrun(_edit_id, <span class="vs">r"'</span><span class="ch">\n</span><span class="vs">'</span><span class="dv">.</span><span class="vs">join</span><span class="kw">(</span><span class="vs">sorted</span><span class="kw">(</span><span class="vs">text</span><span class="dv">.</span><span class="vs">splitlines</span><span class="kw">()))</span><span class="vs">"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -1,3 +1,3 @@
+5th line
 This should go to the 1st line
-5th line
 last line</code></pre>
</div>
</div>
<div id="d524ffef" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb173"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>((<span class="cf">await</span> read_msg(n<span class="op">=</span><span class="dv">0</span>, <span class="bu">id</span><span class="op">=</span>_edit_id, nums<span class="op">=</span><span class="va">True</span>)).content)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>     1 â”‚ 5th line
     2 â”‚ This should go to the 1st line
     3 â”‚ last line</code></pre>
</div>
</div>
<div id="26889752" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb175"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="cf">await</span> del_msg(_edit_id)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>{'status': 'success'}</code></pre>
</div>
</div>
<div id="7c4bfcc0" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb177"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> TemporaryDirectory() <span class="im">as</span> tmp:</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>tmp<span class="sc">}</span><span class="ss">/test.txt'</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a>    Path(p).write_text(<span class="st">'alpha</span><span class="ch">\n</span><span class="st">beta</span><span class="ch">\n</span><span class="st">gamma</span><span class="ch">\n</span><span class="st">delta</span><span class="ch">\n</span><span class="st">'</span>)</span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="cf">await</span> file_insert_line(p, <span class="dv">0</span>, <span class="st">'first'</span>))</span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="cf">await</span> file_str_replace(p, <span class="st">'beta'</span>, <span class="st">'BETA'</span>))</span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="cf">await</span> file_strs_replace(p, [<span class="st">'gamma'</span>, <span class="st">'delta'</span>], [<span class="st">'GAMMA'</span>, <span class="st">'DELTA'</span>]))</span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="cf">await</span> file_replace_lines(p, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">'two</span><span class="ch">\n</span><span class="st">three</span><span class="ch">\n</span><span class="st">'</span>))</span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="cf">await</span> file_del_lines(p, <span class="dv">1</span>))</span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="cf">await</span> file_pyrun(p, <span class="vs">r"'</span><span class="ch">\n</span><span class="vs">'</span><span class="dv">.</span><span class="vs">join</span><span class="kw">(</span><span class="vs">reversed</span><span class="kw">(</span><span class="vs">text</span><span class="dv">.</span><span class="vs">splitlines</span><span class="kw">()))</span><span class="vs">"</span>))</span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">'---'</span>)</span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(Path(p).read_text())</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>@@ -1 +1,2 @@
+first
 alpha
@@ -2,3 +2,3 @@
 alpha
-beta
+BETA
 gamma
@@ -3,3 +3,3 @@
 BETA
-gamma
-delta
+GAMMA
+DELTA
@@ -1,4 +1,4 @@
 first
-alpha
-BETA
+two
+three
 GAMMA
@@ -1,2 +1 @@
-first
 two
@@ -1,4 +1,4 @@
+DELTA
+GAMMA
+three
 two
-three
-GAMMA
-DELTA
---
DELTA
GAMMA
three
two</code></pre>
</div>
</div>
</section>
<section id="ast-grep" class="level2">
<h2 class="anchored" data-anchor-id="ast-grep">ast-grep</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L818" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="ast_py" class="level3">
<h3 class="anchored" data-anchor-id="ast_py">ast_py</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb179"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ast_py(</span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a>    code:<span class="bu">str</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get an SgRoot root node for python <code>code</code></em></p>
<div id="faeb0863" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb180"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>node <span class="op">=</span> ast_py(<span class="st">"print('hello world')"</span>)</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>stmt <span class="op">=</span> node.find(pattern<span class="op">=</span><span class="st">"print($A)"</span>)</span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> stmt.get_match(<span class="st">'A'</span>)</span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>res.text(),res.<span class="bu">range</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>("'hello world'",
 Range(start=Pos(line=0, col=6, index=6), end=Pos(line=0, col=19, index=19)))</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L825" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ast_grep" class="level3">
<h3 class="anchored" data-anchor-id="ast_grep">ast_grep</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb182"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ast_grep(</span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a>    pattern:<span class="bu">str</span>, <span class="co"># ast-grep pattern to search, e.g "post($A, data=$B, $$$)"</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a>    path:<span class="bu">str</span><span class="op">=</span><span class="st">'.'</span>, <span class="co"># path to recursively search for files</span></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>    lang:<span class="bu">str</span><span class="op">=</span><span class="st">'python'</span>, <span class="co"># language to search/scan</span></span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Use <code>ast-grep</code> to find code patterns by AST structure (not text).</em></p>
<p>Pattern syntax: - $VAR captures single nodes, <span class="math display">\[$ captures multiple
- Match structure directly: `def $FUNC(\]</span>$)<code>finds any function;</code>class $CLASS<code>finds classes regardless of inheritance - DON'T include</code>:` - itâ€™s concrete syntax, not AST structure - Whitespace/formatting ignored - matches structural equivalence</p>
<p>Examples: <code>import $MODULE</code> (find imports); <code>$OBJ.$METHOD($$$)</code> (find method calls); <code>await $EXPR</code> (find await expressions)</p>
<p>Useful for: Refactoringâ€”find all uses of deprecated APIs or changed signatures; Security reviewâ€”locate SQL queries, file operations, eval calls; Code explorationâ€”understand how libraries are used across codebase; Pattern analysisâ€”find async functions, error handlers, decorators; Better than regexâ€”handles multi-line code, nested structures, respects syntax</p>
<p>The <a href="https://AnswerDotAI.github.io/dialoghelper/core.html#ast_grep"><code>ast_grep</code></a> function calls the <code>ast-grep</code> CLI, which is a tool for searching code based on its structure rather than just text patterns. Unlike regular expressions that match character sequences, <code>ast-grep</code> understands the syntax of programming languages and lets you search for code patterns in a way that respects the languageâ€™s grammar. This means you can find function calls, variable assignments, or other code constructs even when theyâ€™re formatted differently or have varying amounts of whitespace.</p>
<p>The key advantage is using metavariables (like <code>$A</code>, <code>$B</code>, <code>$$$</code>) as placeholders in your search patterns. When you search for <code>xpost($A, data=$B, $$$)</code>, youâ€™re asking to find all calls to <code>xpost</code> where the first argument can be anything (captured as <code>$A</code>), thereâ€™s a keyword argument <code>data</code> with any value (captured as <code>$B</code>), and there may be additional arguments after that (the <code>$$$</code> matches zero or more remaining arguments). This is much more reliable than trying to write a regex that handles all the variations of how that function might be called.</p>
<p>In the example below, we search for calls to <code>xpost</code> in the parent directory and extract both the matched code and the specific values of our metavariables, showing us exactly where and how this function is being used in the codebase.</p>
<div id="f7227c1e" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb183"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>res <span class="op">=</span> ast_grep(<span class="vs">r"xpost</span><span class="kw">(</span><span class="dv">$</span><span class="vs">A, data=</span><span class="dv">$</span><span class="vs">B, </span><span class="dv">$$$</span><span class="kw">)</span><span class="vs">"</span>, <span class="st">'..'</span>)</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>[(o[<span class="st">'text'</span>],o[<span class="st">'metaVariables'</span>][<span class="st">'single'</span>],o[<span class="st">'file'</span>]) <span class="cf">for</span> o <span class="kw">in</span> res]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>[('xpost(url, data=data, headers=headers)',
  {'A': {'text': 'url',
    'range': {'byteOffset': {'start': 5469, 'end': 5472},
     'start': {'line': 111, 'column': 30},
     'end': {'line': 111, 'column': 33}}},
   'B': {'text': 'data',
    'range': {'byteOffset': {'start': 5479, 'end': 5483},
     'start': {'line': 111, 'column': 40},
     'end': {'line': 111, 'column': 44}}}},
  'dialoghelper/core.py')]</code></pre>
</div>
</div>
<p><strong>Basic Patterns:</strong> - Match code structure directly: <code>console.log($ARG)</code> - Metavariables capture parts: <code>$VAR</code> (single), <code>$$$</code> (multiple) - Patterns match AST structure, not text - whitespace/formatting doesnâ€™t matter</p>
<p><strong>The Colon Issue:</strong> - <strong>Donâ€™t include <code>:</code> in patterns</strong> - itâ€™s part of Pythonâ€™s concrete syntax, not the AST structure - âœ… <code>def $FUNC($$$)</code> - matches function definitions - âŒ <code>def $FUNC($$$):</code> - too specific, looking for the colon token itself</p>
<p><strong>When to use <code>kind</code> vs <code>pattern</code>:</strong> - <code>pattern</code>: Simple direct matches (<code>await $EXPR</code>) - <code>kind</code>: Structural node types (<code>kind: function_declaration</code>)</p>
<p><strong>Critical rule for relational searches:</strong> Always add <code>stopBy: end</code> to <code>has</code>/<code>inside</code> rules to search the entire subtree:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb185"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">has</span><span class="kw">:</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">pattern</span><span class="kw">:</span><span class="at"> await $EXPR</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">stopBy</span><span class="kw">:</span><span class="at"> end</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Escaping in shell:</strong> Use <code>\$VAR</code> or single quotes when using <code>--inline-rules</code> from command line</p>
</section>
</section>
<section id="context" class="level2">
<h2 class="anchored" data-anchor-id="context">Context</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L849" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="ctx_folder" class="level3">
<h3 class="anchored" data-anchor-id="ctx_folder">ctx_folder</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb186"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> ctx_folder(</span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a>    path:Path<span class="op">=</span><span class="st">'.'</span>, <span class="co"># Path to collect</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>    types:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="st">'py,doc'</span>, <span class="co"># list or comma-separated str of ext types from: py, js, java, c, cpp, rb, r, ex, sh, web, doc, cfg</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>    out:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include notebook cell outputs?</span></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>    raw:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Add raw message, or note?</span></span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>    exts:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># list or comma-separated str of exts to include (overrides `types`)</span></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>    prefix:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include Anthropic's suggested prose intro?</span></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>    include_base:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include full path in src?</span></span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>    title:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional title attr for Documents element</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>    max_size:<span class="bu">int</span><span class="op">=</span><span class="dv">100000</span>, <span class="co"># Skip files larger than this (bytes)</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>    max_total:<span class="bu">int</span><span class="op">=</span><span class="dv">10000000</span>, <span class="co"># Max total output size in bytes</span></span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>    readme_first:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Prioritize README files at start of context?</span></span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a>    files_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return dict of {filename: size} instead of context?</span></span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a>    sigs_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return signatures instead of full text? (where supported by `codesigs` lib)</span></span>
<span id="cb186-16"><a href="#cb186-16" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include cell ids in notebooks?</span></span>
<span id="cb186-17"><a href="#cb186-17" aria-hidden="true" tabindex="-1"></a>    recursive:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># search subfolders</span></span>
<span id="cb186-18"><a href="#cb186-18" aria-hidden="true" tabindex="-1"></a>    symlinks:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># follow symlinks?</span></span>
<span id="cb186-19"><a href="#cb186-19" aria-hidden="true" tabindex="-1"></a>    file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching glob</span></span>
<span id="cb186-20"><a href="#cb186-20" aria-hidden="true" tabindex="-1"></a>    file_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching regex</span></span>
<span id="cb186-21"><a href="#cb186-21" aria-hidden="true" tabindex="-1"></a>    folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only enter folders matching regex</span></span>
<span id="cb186-22"><a href="#cb186-22" aria-hidden="true" tabindex="-1"></a>    skip_file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip files matching glob</span></span>
<span id="cb186-23"><a href="#cb186-23" aria-hidden="true" tabindex="-1"></a>    skip_file_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip files matching regex</span></span>
<span id="cb186-24"><a href="#cb186-24" aria-hidden="true" tabindex="-1"></a>    skip_folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip folders matching regex,</span></span>
<span id="cb186-25"><a href="#cb186-25" aria-hidden="true" tabindex="-1"></a>    ret_folders:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># return folders, not just files</span></span>
<span id="cb186-26"><a href="#cb186-26" aria-hidden="true" tabindex="-1"></a>    sort:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># sort files by name within each folder</span></span>
<span id="cb186-27"><a href="#cb186-27" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb186-28"><a href="#cb186-28" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert folder to XML context and place in a new message</em></p>
<div id="2300e115" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb187"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ctx_folder('..', max_total=600, sigs_only=True, exts='py')</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p><documents><document index="4"><src> ../dialoghelper/capture.py </src><document-content> def setup_share(): â€œSetup screen sharingâ€</document-content></document></documents></p>
<p>def start_share(): fire_event(â€˜shareScreenâ€™)</p>
<p>def _capture_screen(timeout=15):</p>
<p>def capture_screen(timeout=15): â€œCapture the screen as a PIL image.â€</p>
<p>def capture_tool(timeout:int=15): â€œCapture the screen. Re-call this function to get the most recent screenshot, as needed. Use default timeout where possibleâ€ <document index="5"><src> ../dialoghelper/core.py </src>&lt;</document></p>
<p>[TRUNCATED: output size 24344 exceeded max size 600 bytes]</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L866" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ctx_repo" class="level3">
<h3 class="anchored" data-anchor-id="ctx_repo">ctx_repo</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb188"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> ctx_repo(</span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a>    owner:<span class="bu">str</span>, <span class="co"># GitHub repo owner</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a>    repo:<span class="bu">str</span>, <span class="co"># GitHub repo name</span></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a>    types:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="st">'py,doc'</span>, <span class="co"># list or comma-separated str of ext types from: py, js, java, c, cpp, rb, r, ex, sh, web, doc, cfg</span></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>    exts:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># list or comma-separated str of exts to include (overrides `types`)</span></span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a>    out:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include notebook cell outputs?</span></span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a>    raw:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Add raw message, or note?</span></span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a>    ref:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Git ref (branch/tag/sha) (get from URL not provided); defaults to repo's default branch</span></span>
<span id="cb188-10"><a href="#cb188-10" aria-hidden="true" tabindex="-1"></a>    folder:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files under this path (get from URL not provided)</span></span>
<span id="cb188-11"><a href="#cb188-11" aria-hidden="true" tabindex="-1"></a>    show_filters:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include filter info in title?</span></span>
<span id="cb188-12"><a href="#cb188-12" aria-hidden="true" tabindex="-1"></a>    token:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># GitHub token (uses GITHUB_TOKEN env var if None)</span></span>
<span id="cb188-13"><a href="#cb188-13" aria-hidden="true" tabindex="-1"></a>    prefix:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include Anthropic's suggested prose intro?</span></span>
<span id="cb188-14"><a href="#cb188-14" aria-hidden="true" tabindex="-1"></a>    include_base:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include full path in src?</span></span>
<span id="cb188-15"><a href="#cb188-15" aria-hidden="true" tabindex="-1"></a>    title:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional title attr for Documents element</span></span>
<span id="cb188-16"><a href="#cb188-16" aria-hidden="true" tabindex="-1"></a>    max_size:<span class="bu">int</span><span class="op">=</span><span class="dv">100000</span>, <span class="co"># Skip files larger than this (bytes)</span></span>
<span id="cb188-17"><a href="#cb188-17" aria-hidden="true" tabindex="-1"></a>    max_total:<span class="bu">int</span><span class="op">=</span><span class="dv">10000000</span>, <span class="co"># Max total output size in bytes</span></span>
<span id="cb188-18"><a href="#cb188-18" aria-hidden="true" tabindex="-1"></a>    readme_first:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Prioritize README files at start of context?</span></span>
<span id="cb188-19"><a href="#cb188-19" aria-hidden="true" tabindex="-1"></a>    files_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return dict of {filename: size} instead of context?</span></span>
<span id="cb188-20"><a href="#cb188-20" aria-hidden="true" tabindex="-1"></a>    sigs_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return signatures instead of full text? (where supported by `codesigs` lib)</span></span>
<span id="cb188-21"><a href="#cb188-21" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include cell ids in notebooks?</span></span>
<span id="cb188-22"><a href="#cb188-22" aria-hidden="true" tabindex="-1"></a>    recursive:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># search subfolders</span></span>
<span id="cb188-23"><a href="#cb188-23" aria-hidden="true" tabindex="-1"></a>    symlinks:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># follow symlinks?</span></span>
<span id="cb188-24"><a href="#cb188-24" aria-hidden="true" tabindex="-1"></a>    file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching glob</span></span>
<span id="cb188-25"><a href="#cb188-25" aria-hidden="true" tabindex="-1"></a>    file_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching regex</span></span>
<span id="cb188-26"><a href="#cb188-26" aria-hidden="true" tabindex="-1"></a>    folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only enter folders matching regex</span></span>
<span id="cb188-27"><a href="#cb188-27" aria-hidden="true" tabindex="-1"></a>    skip_file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip files matching glob</span></span>
<span id="cb188-28"><a href="#cb188-28" aria-hidden="true" tabindex="-1"></a>    skip_file_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip files matching regex</span></span>
<span id="cb188-29"><a href="#cb188-29" aria-hidden="true" tabindex="-1"></a>    skip_folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip folders matching regex,</span></span>
<span id="cb188-30"><a href="#cb188-30" aria-hidden="true" tabindex="-1"></a>    ret_folders:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># return folders, not just files</span></span>
<span id="cb188-31"><a href="#cb188-31" aria-hidden="true" tabindex="-1"></a>    sort:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># sort files by name within each folder</span></span>
<span id="cb188-32"><a href="#cb188-32" aria-hidden="true" tabindex="-1"></a>): <span class="co"># XML for LM context, or dict of file sizes</span></span>
<span id="cb188-33"><a href="#cb188-33" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Convert GitHub repo to XML context and place in a new message</em></p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L883" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ctx_symfile" class="level3">
<h3 class="anchored" data-anchor-id="ctx_symfile">ctx_symfile</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb189"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> ctx_symfile(</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>    sym</span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add note with filepath and contents for a symbolâ€™s source file</em></p>
<div id="6180d2a3" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb190"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ctx_symfile(TemporaryDirectory)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L890" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ctx_symfolder" class="level3">
<h3 class="anchored" data-anchor-id="ctx_symfolder">ctx_symfolder</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb191"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> ctx_symfolder(</span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>    sym, <span class="co"># Symbol to get folder context from</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>    types:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="st">'py'</span>, <span class="co"># List or comma-separated str of ext types from: py, js, java, c, cpp, rb, r, ex, sh, web, doc, cfg</span></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>    skip_file_re:<span class="bu">str</span><span class="op">=</span><span class="st">'^_mod'</span>, <span class="co"># Skip files matching regex</span></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>    prefix:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include Anthropic's suggested prose intro?</span></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>    out:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include notebook cell outputs?</span></span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>    include_base:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include full path in src?</span></span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>    title:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional title attr for Documents element</span></span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>    max_size:<span class="bu">int</span><span class="op">=</span><span class="dv">100000</span>, <span class="co"># Skip files larger than this (bytes)</span></span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a>    max_total:<span class="bu">int</span><span class="op">=</span><span class="dv">10000000</span>, <span class="co"># Max total output size in bytes</span></span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a>    readme_first:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Prioritize README files at start of context?</span></span>
<span id="cb191-13"><a href="#cb191-13" aria-hidden="true" tabindex="-1"></a>    files_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return dict of {filename: size} instead of context?</span></span>
<span id="cb191-14"><a href="#cb191-14" aria-hidden="true" tabindex="-1"></a>    sigs_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return signatures instead of full text? (where supported by `codesigs` lib)</span></span>
<span id="cb191-15"><a href="#cb191-15" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include cell ids in notebooks?</span></span>
<span id="cb191-16"><a href="#cb191-16" aria-hidden="true" tabindex="-1"></a>    recursive:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># search subfolders</span></span>
<span id="cb191-17"><a href="#cb191-17" aria-hidden="true" tabindex="-1"></a>    symlinks:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># follow symlinks?</span></span>
<span id="cb191-18"><a href="#cb191-18" aria-hidden="true" tabindex="-1"></a>    file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching glob</span></span>
<span id="cb191-19"><a href="#cb191-19" aria-hidden="true" tabindex="-1"></a>    file_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching regex</span></span>
<span id="cb191-20"><a href="#cb191-20" aria-hidden="true" tabindex="-1"></a>    folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only enter folders matching regex</span></span>
<span id="cb191-21"><a href="#cb191-21" aria-hidden="true" tabindex="-1"></a>    skip_file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip files matching glob</span></span>
<span id="cb191-22"><a href="#cb191-22" aria-hidden="true" tabindex="-1"></a>    skip_folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip folders matching regex,</span></span>
<span id="cb191-23"><a href="#cb191-23" aria-hidden="true" tabindex="-1"></a>    ret_folders:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># return folders, not just files</span></span>
<span id="cb191-24"><a href="#cb191-24" aria-hidden="true" tabindex="-1"></a>    sort:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># sort files by name within each folder</span></span>
<span id="cb191-25"><a href="#cb191-25" aria-hidden="true" tabindex="-1"></a>    exts:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># list or comma-separated str of exts to include</span></span>
<span id="cb191-26"><a href="#cb191-26" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb191-27"><a href="#cb191-27" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add raw message with folder context for a symbolâ€™s source file location</em></p>
<div id="7a308942" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb192"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ctx_symfolder(folder2ctx)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L899" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="ctx_sympkg" class="level3">
<h3 class="anchored" data-anchor-id="ctx_sympkg">ctx_sympkg</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb193"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a><span class="cf">async</span> <span class="kw">def</span> ctx_sympkg(</span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>    sym, <span class="co"># Symbol to get folder context from</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>    types:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="st">'py'</span>, <span class="co"># List or comma-separated str of ext types from: py, js, java, c, cpp, rb, r, ex, sh, web, doc, cfg</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a>    skip_file_re:<span class="bu">str</span><span class="op">=</span><span class="st">'^_mod'</span>, <span class="co"># Skip files matching regex</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>    prefix:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Include Anthropic's suggested prose intro?</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>    out:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include notebook cell outputs?</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>    include_base:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include full path in src?</span></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a>    title:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional title attr for Documents element</span></span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>    max_size:<span class="bu">int</span><span class="op">=</span><span class="dv">100000</span>, <span class="co"># Skip files larger than this (bytes)</span></span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a>    max_total:<span class="bu">int</span><span class="op">=</span><span class="dv">10000000</span>, <span class="co"># Max total output size in bytes</span></span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>    readme_first:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Prioritize README files at start of context?</span></span>
<span id="cb193-13"><a href="#cb193-13" aria-hidden="true" tabindex="-1"></a>    files_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return dict of {filename: size} instead of context?</span></span>
<span id="cb193-14"><a href="#cb193-14" aria-hidden="true" tabindex="-1"></a>    sigs_only:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Return signatures instead of full text? (where supported by `codesigs` lib)</span></span>
<span id="cb193-15"><a href="#cb193-15" aria-hidden="true" tabindex="-1"></a>    ids:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># Include cell ids in notebooks?</span></span>
<span id="cb193-16"><a href="#cb193-16" aria-hidden="true" tabindex="-1"></a>    recursive:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># search subfolders</span></span>
<span id="cb193-17"><a href="#cb193-17" aria-hidden="true" tabindex="-1"></a>    symlinks:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># follow symlinks?</span></span>
<span id="cb193-18"><a href="#cb193-18" aria-hidden="true" tabindex="-1"></a>    file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching glob</span></span>
<span id="cb193-19"><a href="#cb193-19" aria-hidden="true" tabindex="-1"></a>    file_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only include files matching regex</span></span>
<span id="cb193-20"><a href="#cb193-20" aria-hidden="true" tabindex="-1"></a>    folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Only enter folders matching regex</span></span>
<span id="cb193-21"><a href="#cb193-21" aria-hidden="true" tabindex="-1"></a>    skip_file_glob:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip files matching glob</span></span>
<span id="cb193-22"><a href="#cb193-22" aria-hidden="true" tabindex="-1"></a>    skip_folder_re:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Skip folders matching regex,</span></span>
<span id="cb193-23"><a href="#cb193-23" aria-hidden="true" tabindex="-1"></a>    ret_folders:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># return folders, not just files</span></span>
<span id="cb193-24"><a href="#cb193-24" aria-hidden="true" tabindex="-1"></a>    sort:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># sort files by name within each folder</span></span>
<span id="cb193-25"><a href="#cb193-25" aria-hidden="true" tabindex="-1"></a>    exts:<span class="bu">str</span> <span class="op">|</span> <span class="bu">list</span><span class="op">=</span><span class="va">None</span>, <span class="co"># list or comma-separated str of exts to include</span></span>
<span id="cb193-26"><a href="#cb193-26" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb193-27"><a href="#cb193-27" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Add raw message with repo context for a symbolâ€™s root package</em></p>
<div id="11c8b385" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb194"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ctx_sympkg(folder2ctx)</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="gists" class="level2">
<h2 class="anchored" data-anchor-id="gists">Gists</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L907" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="load_gist" class="level3">
<h3 class="anchored" data-anchor-id="load_gist">load_gist</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb195"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> load_gist(</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>    gist_id:<span class="bu">str</span></span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Retrieve a gist</em></p>
<div id="3ab7586f" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb196"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>gistid <span class="op">=</span> <span class="st">'jph00/e7cfd4ded593e8ef6217e78a0131960c'</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>gist <span class="op">=</span> load_gist(gistid)</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>gist.html_url</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'https://gist.github.com/jph00/e7cfd4ded593e8ef6217e78a0131960c'</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L915" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="gist_file" class="level3">
<h3 class="anchored" data-anchor-id="gist_file">gist_file</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb198"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> gist_file(</span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>    gist_id:<span class="bu">str</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Get the first file from a gist</em></p>
<div id="ea33969d" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb199"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a>gfile <span class="op">=</span> gist_file(gistid)</span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(gfile.content[:<span class="dv">100</span>]<span class="op">+</span><span class="st">"â€¦"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>"This is a test module which makes some simple tools available."
__all__ = ["hi","whoami"]

testfoo=â€¦</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L921" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="import_string" class="level3">
<h3 class="anchored" data-anchor-id="import_string">import_string</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb201"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> import_string(</span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a>    code:<span class="bu">str</span>, <span class="co"># Code to import as a module</span></span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a>    name:<span class="bu">str</span>, <span class="co"># Name of module to create</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="9ec853f7" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb202"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hi(who:<span class="bu">str</span>):</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"Say hi to `who`"</span></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello </span><span class="sc">{</span>who<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hi2(who):</span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"Say hi to `who`"</span></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello </span><span class="sc">{</span>who<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> hi3(who:<span class="bu">str</span>):</span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="ss">f"Hello </span><span class="sc">{</span>who<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb202-11"><a href="#cb202-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-12"><a href="#cb202-12" aria-hidden="true" tabindex="-1"></a>bye <span class="op">=</span> <span class="st">"bye"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div id="728affe1" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb203"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> is_usable_tool(hi)</span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_usable_tool(hi2)</span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_usable_tool(hi3)</span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="cf">assert</span> <span class="kw">not</span> is_usable_tool(bye)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L937" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="mk_toollist" class="level3">
<h3 class="anchored" data-anchor-id="mk_toollist">mk_toollist</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb204"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mk_toollist(</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>    syms</span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div id="a952258c" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb205"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(mk_toollist([hi]))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>- &amp;`hi`: Say hi to `who`</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L941" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="import_gist" class="level3">
<h3 class="anchored" data-anchor-id="import_gist">import_gist</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb207"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> import_gist(</span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a>    gist_id:<span class="bu">str</span>, <span class="co"># user/id or just id of gist to import as a module</span></span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a>    mod_name:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># module name to create (taken from gist filename if not passed)</span></span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a>    add_global:<span class="bu">bool</span><span class="op">=</span><span class="va">True</span>, <span class="co"># add module to caller's globals?</span></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a>    import_wildcard:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># import all exported symbols to caller's globals</span></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a>    create_msg:<span class="bu">bool</span><span class="op">=</span><span class="va">False</span>, <span class="co"># Add a message that lists usable tools</span></span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Import gist directly from string without saving to disk</em></p>
<div id="aefee238" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb208"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>import_gist(gistid)</span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a>importtest.testfoo</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'testbar'</code></pre>
</div>
</div>
<div id="4a4f7f89" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb210"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>import_gist.__doc__</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'Import gist directly from string without saving to disk'</code></pre>
</div>
</div>
<div id="e80a7944" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb212"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>import_gist(gistid, import_wildcard<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a>importtest.testfoo</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'testbar'</code></pre>
</div>
</div>
<div id="573abb48" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb214"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>hi(<span class="st">"Sarah"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>'Hello Sarah'</code></pre>
</div>
</div>
<div id="392dc090" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb216"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>importtest.<span class="va">__all__</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<pre><code>['hi', 'whoami']</code></pre>
</div>
</div>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L965" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="update_gist" class="level3">
<h3 class="anchored" data-anchor-id="update_gist">update_gist</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb218"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_gist(</span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>    gist_id:<span class="bu">str</span>, content:<span class="bu">str</span></span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Update the first file in a gist with new content</em></p>
</section>
</section>
<section id="help" class="level2">
<h2 class="anchored" data-anchor-id="help">Help</h2>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L976" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="dialoghelper_explain_dialog_editing" class="level3">
<h3 class="anchored" data-anchor-id="dialoghelper_explain_dialog_editing">dialoghelper_explain_dialog_editing</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb219"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dialoghelper_explain_dialog_editing(</span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a>)<span class="op">-&gt;</span><span class="bu">str</span>: <span class="co"># Detailed documention on dialoghelper dialog editing</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Call this to get a detailed explanation of how dialog editing is done in dialoghelper.</em> <strong>ALWAYS</strong> call this first, if dialog editing has not previously occured in this session</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L1064" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="solveit_docs" class="level3">
<h3 class="anchored" data-anchor-id="solveit_docs">solveit_docs</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb220"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> solveit_docs(</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Full reference documentation for Solveit - use this to answer questions about how to use Solveit.</em> <strong>NB</strong>: The whole docs fit in LLM context, so read the whole thing, donâ€™t search/filter it. <em>Always</em> re-run rather than relying on truncated history or assumptions.</p>
<hr>
<p><a href="https://github.com/AnswerDotAI/dialoghelper/blob/main/dialoghelper/core.py#L1074" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="dialog_link" class="level3">
<h3 class="anchored" data-anchor-id="dialog_link">dialog_link</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb221"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> dialog_link(</span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a>    path:<span class="bu">str</span><span class="op">=</span><span class="st">''</span>, <span class="co"># Path to dialog (e.g. '/aai-ws/dialoghelper/nbs/00_core'), defaults to current dialog</span></span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a>    msg_id:<span class="bu">str</span><span class="op">=</span><span class="va">None</span>, <span class="co"># Optional message id to scroll to</span></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>):</span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><em>Return an IPython HTML link to open a dialog in Solveit.</em> After calling this tool, output the resulting HTML anchor tag exactly as returnedâ€”do not wrap in a fenced code block or convert to markdown link format.</p>
<div id="c1ea9518" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb222"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>dialog_link(msg_id<span class="op">=</span><span class="st">'_a7d82acd'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display cell-output-markdown">
<div class="prose">
<p><a href="#_a7d82acd">#_a7d82acd</a></p>
</div>
</div>
</div>
<div id="1db3ad79" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb223"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a>dialog_link(path<span class="op">=</span><span class="st">'/CRAFT'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<a href="./dialog_?name=CRAFT" target="_blank">CRAFT</a>
</div>
</div>
<div id="23559d60" class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb224"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>dialog_link(path<span class="op">=</span><span class="st">'/CRAFT'</span>, msg_id<span class="op">=</span><span class="st">'_ce727fd8'</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<a href="./dialog_?name=CRAFT#_ce727fd8" target="_blank">CRAFT</a>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§‹";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/AnswerDotAI\.github\.io\/dialoghelper");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/AnswerDotAI/dialoghelper/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>